<div class="header-section">
  <h2>My Books</h2>
</div>

<!-- Expired Books section! -->
<div *ngIf="myExpiredBooks().length > 0">
  <h2 class="book-grid">Borrow Request Expired:</h2>
  <div class="book-grid" *ngFor="let book of myApprovedBooks()">
    <mat-card class="book-card" (click)="openRequestDialog(book)">
      <div class="book-header">
        <div class="book-info">
          <h2 class="book-title">{{ book.title }}</h2>
          <p class="book-author">by {{ book.author }}</p>
        </div>
        <div class="book-meta">
          <mat-icon color="primary">book</mat-icon>
          <span class="book-genre">{{ book.genre }}</span>
        </div>
      </div>

      <div class="book-body">
        <p><strong>Published:</strong> {{ book.publishedYear }}</p>
      </div>
      <button (click)="openRequestDialog(book)">Re-Issue</button>
      <button (click)="returnBook(book.id)">Return</button>
    </mat-card>
  </div>
</div>

<!-- Deadline this week section! -->
<div *ngIf="myDeadlineAlerts().length > 0">
  <h2 class="book-grid">Deadline this week:</h2>
  <div class="book-grid">
    <mat-card class="book-card" *ngFor="let book of myDeadlineAlerts()" (click)="openRequestDialog(book)">
      <div class="book-header">
        <div class="book-info">
          <h2 class="book-title">{{ book.title }}</h2>
          <p class="book-author">by {{ book.author }}</p>
        </div>
        <div class="book-meta">
          <mat-icon color="primary">book</mat-icon>
          <span class="book-genre">{{ book.genre }}</span>
        </div>
      </div>

      <div class="book-body">
        <p><strong>Published:</strong> {{ book.publishedYear }}</p>
      </div>
      <button (click)="openRequestDialog(book)">Re-Issue</button>
      <button (click)="returnBook(book.id)">Return</button>
    </mat-card>
  </div>
</div>

<!-- Approved Books section! -->
<div *ngIf="myApprovedBooks().length > 0">
  <h2 class="book-grid">Read Here:</h2>
  <div class="book-grid" *ngIf="myApprovedBooks().length > 0; else noBooks">
    <mat-card class="book-card" *ngFor="let book of myApprovedBooks()">
      <div class="book-header">
        <div class="book-info">
          <h2 class="book-title">{{ book.title }}</h2>
          <p class="book-author">by {{ book.author }}</p>
        </div>
        <div class="book-meta">
          <mat-icon color="primary">book</mat-icon>
          <span class="book-genre">{{ book.genre }}</span>
        </div>
      </div>

      <div class="book-body">
        <p><strong>Published:</strong> {{ book.publishedYear }}</p>
      </div>

      <button (click)="openRequestDialog(book)">Re-Issue</button>
      <button (click)="returnBook(book.id)">Return</button>
    </mat-card>
  </div>
</div>

<ng-template #noBooks>
  <p class="no-books-message">No approved books found.</p>
</ng-template>
